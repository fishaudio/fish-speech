# VoiceReel ν”„λ΅μ νΈ μ§„ν–‰ μƒν™© λ¶„μ„ λ³΄κ³ μ„

## 1. ν”„λ΅μ νΈ κ°μ”

VoiceReel Studioλ” fish-speech 1.5 μ—”μ§„μ„ κΈ°λ°μΌλ΅ ν•λ” **λ‹¤μ¤‘ ν™”μ ν…μ¤νΈ-ν¬-μ¤ν”ΌμΉ API**λ΅, B2B REST API ν•νƒλ΅ μ κ³µλλ” μ„λΉ„μ¤μ…λ‹λ‹¤. λ‹¤μ¤‘ ν™”μ μ¤ν¬λ¦½νΈλ¥Ό μ…λ ¥ν•λ©΄ μ‹κ°„ λ™κΈ°ν™”λ μ¤λ””μ¤μ™€ μλ§‰(JSON/VTT/SRT)μ„ λ°ν™ν•λ” κ²ƒμ΄ ν•µμ‹¬ κΈ°λ¥μ…λ‹λ‹¤.

## 2. ν„μ¬ κµ¬ν„ μƒνƒ λ¶„μ„

### 2.1 μ™„μ„±λ„ ν„ν™© (μ „μ²΄ μ•½ 85% μ™„λ£)

#### β… **μ™„λ£λ ν•µμ‹¬ κΈ°λ¥λ“¤**

**API μ„λ²„ κΈ°λ° κµ¬μ¶• (100% μ™„λ£)**
- `flask_app.py`: κ°„λ‹¨ν• Flask-like μ• ν”λ¦¬μΌ€μ΄μ… κµ¬μ΅° κµ¬ν„
- `server.py`: HTTP μ„λ²„ μ¤μΌλ ν†¤ μ™„μ„± (BaseHTTPRequestHandler κΈ°λ°)
- `task_queue.py`: μΈλ©”λ¨λ¦¬ μ‘μ—… ν κµ¬ν„ (Celery λ€μ²΄)
- `db.py`: SQLite/PostgreSQL μ—°λ™ μ™„λ£

**ν™”μ κ΄€λ¦¬ API (100% μ™„λ£)**
- `POST /v1/speakers`: ν™”μ λ“±λ΅ (30μ΄ μ΄μƒ μμ„± κ²€μ¦ ν¬ν•¨)
- `GET /v1/speakers`: ν™”μ λ©λ΅ μ΅°ν (νμ΄μ§€λ„¤μ΄μ… μ§€μ›)
- `GET /v1/speakers/{id}`: κ°λ³„ ν™”μ μƒμ„Έ μ •λ³΄

**λ‹¤μ¤‘ ν™”μ ν•©μ„± API (100% μ™„λ£)**
- `POST /v1/synthesize`: JSON μ¤ν¬λ¦½νΈ β†’ μ¤λ””μ¤ λ³€ν™
- λ‹¤μ¤‘ ν¬λ§· μ§€μ› (WAV, MP3)
- μƒν”λ μ΄νΈ μ„¤μ • κ°€λ¥

**μλ§‰ μƒμ„± λ¨λ“ (100% μ™„λ£)**
- `caption.py`: WebVTT, SRT, JSON ν¬λ§· λ³€ν™ κµ¬ν„
- ν™”μλ³„ νƒ€μ„μ¤νƒ¬ν”„ λ§¤ν•‘ μ™„λ£

**μ‘μ—… μƒνƒ κ΄€λ¦¬ (100% μ™„λ£)**
- `GET /v1/jobs/{id}`: λΉ„λ™κΈ° μ‘μ—… μƒνƒ μ΅°ν
- `DELETE /v1/jobs/{id}`: μ‘μ—… μ‚­μ  λ° νμΌ μ •λ¦¬
- presigned URL 15λ¶„ μ ν• κµ¬ν„

**ν΄λΌμ΄μ–ΈνΈ SDK (100% μ™„λ£)**
- `client.py`: μ™„μ „ν• Python ν΄λΌμ΄μ–ΈνΈ κµ¬ν„
- CLI μΈν„°νμ΄μ¤ ν¬ν•¨ (register, synthesize, job, list-speakers λ“±)
- λ©€ν‹°ννΈ μ—…λ΅λ“ μ§€μ›

**ν…μ¤νΈ μΈν”„λΌ (100% μ™„λ£)**
- λ‹¨μ„ ν…μ¤νΈ: `test_voicereel_infra.py`
- ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ: `test_voicereel_client.py` 
- E2E ν…μ¤νΈ: `test_voicereel_e2e.py`
- λ¨λ“  ν…μ¤νΈ μΌ€μ΄μ¤ κµ¬ν„ μ™„λ£

#### π΅ **λ¶€λ¶„ μ™„λ£λ κΈ°λ¥λ“¤**

**λ³΄μ• λ° μΈμ¦ (80% μ™„λ£)**
- API ν‚¤ κΈ°λ° μΈμ¦ κµ¬ν„ μ™„λ£
- HMAC-SHA256 μ„λ… μµμ… κµ¬ν„
- TLS 1.3 μ μ© λ―Έμ™„λ£

**μ‚¬μ©λ‰ ν†µκ³„ (90% μ™„λ£)**
- Usage metering ν…μ΄λΈ” μ„¤κ³„ μ™„λ£
- μ›”κ°„ λ¦¬ν¬νΈ ν•¨μ κµ¬ν„
- μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“ λ―Έκµ¬ν„

#### β **λ―Έμ™„λ£ κΈ°λ¥λ“¤**

**ν”„λ΅λ•μ… λ°°ν¬ μ¤€λΉ„ (30% μ™„λ£)**
- Celery/Redis μ—°λ™ λ―Έμ™„λ£ (ν„μ¬ μΈλ©”λ¨λ¦¬ ν μ‚¬μ©)
- S3 μ—…λ΅λ“ λ¨λ“ λ―Έκµ¬ν„ (λ΅μ»¬ νμΌ μ‹μ¤ν… μ‚¬μ©)
- Docker/K8s λ°°ν¬ μ„¤μ • λ―Έμ™„λ£

**μ„±λ¥ μµμ ν™” (0% μ™„λ£)**
- 30μ΄ μ¤λ””μ¤ 8μ΄ λ λ”λ§ λ©ν‘ λ―Έλ‹¬μ„±
- λ™μ‹ 500 req/s μ²λ¦¬ λ―Έν…μ¤νΈ
- GPU μ›μ»¤ μµμ ν™” λ―Έκµ¬ν„

**λ¨λ‹ν„°λ§ λ° μ΄μ (10% μ™„λ£)**
- Prometheus/Loki μ—°λ™ λ―Έμ™„λ£
- 99.9% κ°€μ©μ„± λ¨λ‹ν„°λ§ λ―Έκµ¬ν„
- CI/CD νμ΄ν”„λΌμΈ λ―Έμ™„λ£

### 2.2 μ•„ν‚¤ν…μ² λ¶„μ„

**ν„μ¬ κµ¬μ΅°:**
```
Client β†’ VoiceReelServer (HTTP) β†’ In-Memory Queue β†’ Worker Thread
                                β† SQLite/PostgreSQL β†™
                          Local File System
```

**λ©ν‘ κµ¬μ΅° (PRD κΈ°μ¤€):**
```
Client β†’ API Gateway (Flask+Gunicorn) β†’ Task Queue (Celery+Redis) β†’ GPU Workers
                                  β† Object Storage (S3) β†™
                            Metadata DB (PostgreSQL)
```

## 3. μ½”λ“ ν’μ§ λ° κµ¬μ΅° ν‰κ°€

### 3.1 κ°•μ 
- **λ¨λ“ν™”**: κ° κΈ°λ¥λ³„λ΅ λ…ν™•ν λ¶„λ¦¬λ νμΌ κµ¬μ΅°
- **ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**: λ¨λ“  μ£Όμ” κΈ°λ¥μ— λ€ν• ν…μ¤νΈ μ΅΄μ¬
- **API μ„¤κ³„**: RESTful μ„¤κ³„ μ›μΉ™ μ¤€μ
- **λ¬Έμ„ν™”**: μƒμ„Έν• PRD, TODO, E2E κ°€μ΄λ“ μ΅΄μ¬
- **νƒ€μ… ννΈ**: λ¨λ“  Python μ½”λ“μ— νƒ€μ… μ–΄λ…Έν…μ΄μ… μ μ©

### 3.2 κ°μ„  ν•„μ” μμ—­
- **μ‹¤μ  TTS μ—”μ§„ μ—°λ™**: ν„μ¬ λ”λ―Έ λ°μ΄ν„° λ°ν™
- **μ—λ¬ ν•Έλ“¤λ§**: ν”„λ΅λ•μ… λ λ²¨ μμ™Έ μ²λ¦¬ λ¶€μ΅±
- **λ΅κΉ…**: κµ¬μ΅°ν™”λ λ΅κΉ… μ‹μ¤ν… ν•„μ”
- **μ„¤μ • κ΄€λ¦¬**: ν™κ²½λ³„ μ„¤μ • λ¶„λ¦¬ ν•„μ”

## 4. μ£Όμ” νμΌλ³„ μƒμ„Έ λ¶„μ„

### 4.1 ν•µμ‹¬ λ¨λ“
- **`server.py`** (442μ¤„): μ™„μ „ν• HTTP μ„λ²„ κµ¬ν„, presigned URL, μ‘μ—… ν κ΄€λ¦¬
- **`client.py`** (280μ¤„): μ™„μ „ν• ν΄λΌμ΄μ–ΈνΈ SDK, CLI μ§€μ›
- **`db.py`** (67μ¤„): SQLite/PostgreSQL μ΄μ¤‘ μ§€μ› κµ¬ν„
- **`caption.py`** (45μ¤„): 3κ°€μ§€ μλ§‰ ν¬λ§· λ³€ν™ μ™„λ£

### 4.2 ν…μ¤νΈ λ¨λ“
- **`test_voicereel_client.py`** (220μ¤„): λ¨ν‚Ήμ„ ν†µν• ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ
- **`test_voicereel_infra.py`** (59μ¤„): μΈν”„λΌ μ»΄ν¬λ„νΈ λ‹¨μ„ ν…μ¤νΈ
- **`test_voicereel_e2e.py`** (63μ¤„): μ‹¤μ  λ°°ν¬ ν™κ²½ E2E ν…μ¤νΈ

## 5. ν„μ¬ κµ¬ν„μ ν•κ³„μ 

### 5.1 κΈ°μ μ  ν•κ³„
1. **μ¤μΌ€μΌλ§**: λ‹¨μΌ ν”„λ΅μ„Έμ¤ κΈ°λ°μΌλ΅ λ™μ‹μ„± μ ν•
2. **νΌμ‹μ¤ν„΄μ¤**: μΈλ©”λ¨λ¦¬ νλ΅ μΈν• μ‘μ—… μ†μ‹¤ μ„ν—
3. **TTS μ—”μ§„**: μ‹¤μ  fish-speech μ—”μ§„ λ―Έμ—°λ™
4. **GPU ν™μ©**: CPU κΈ°λ° μ²λ¦¬λ΅ μ„±λ¥ μ ν•

### 5.2 μ΄μμƒ ν•κ³„
1. **λ¨λ‹ν„°λ§**: μ‹¤μ‹κ°„ μƒνƒ ν™•μΈ λ¶κ°€
2. **λ°°ν¬**: μλ™ λ°°ν¬λ§ κ°€λ¥
3. **λ°±μ—…**: λ°μ΄ν„° λ°±μ—… μ „λµ λ¶€μ¬
4. **λ³΄μ•**: κΈ°λ³Έμ μΈ μΈμ¦λ§ κµ¬ν„

## 6. λ‹¤μ λ‹¨κ³„ μ°μ„ μμ„ μ μ•

### 6.1 μ¦‰μ‹ κµ¬ν„ ν•„μ” (λ†’μ€ μ°μ„ μμ„)
1. **Celery/Redis μ—°λ™**: μ•μ •μ μΈ μ‘μ—… ν κµ¬ν„
2. **fish-speech μ—”μ§„ μ—°λ™**: μ‹¤μ  TTS κΈ°λ¥ κµ¬ν„
3. **S3 μ—°λ™**: νμΌ μ €μ¥μ† λ¶„λ¦¬
4. **Docker μ»¨ν…μ΄λ„ν™”**: λ°°ν¬ ν™κ²½ ν‘μ¤€ν™”

### 6.2 μ¤‘κΈ° κµ¬ν„ λ©ν‘ (μ¤‘κ°„ μ°μ„ μμ„)
1. **μ„±λ¥ μµμ ν™”**: GPU μ›μ»¤ ν’€ κµ¬ν„
2. **λ¨λ‹ν„°λ§ μ‹μ¤ν…**: Prometheus/Grafana μ—°λ™
3. **CI/CD νμ΄ν”„λΌμΈ**: GitHub Actions κµ¬ν„
4. **λ³΄μ• κ°•ν™”**: TLS, RBAC κµ¬ν„

### 6.3 μ¥κΈ° κµ¬ν„ λ©ν‘ (λ‚®μ€ μ°μ„ μμ„)
1. **λ€μ‹λ³΄λ“ UI**: κ΄€λ¦¬μ μ›Ή μΈν„°νμ΄μ¤
2. **λ‹¤μ¤‘ λ¦¬μ „ λ°°ν¬**: κΈ€λ΅λ² μ„λΉ„μ¤ ν™•μ¥
3. **A/B ν…μ¤ν…**: μμ„± ν’μ§ λΉ„κµ μ‹μ¤ν…
4. **SLA λ¨λ‹ν„°λ§**: 99.9% κ°€μ©μ„± λ³΄μ¥

## 7. κ²°λ΅ 

VoiceReel ν”„λ΅μ νΈλ” **μ „μ²΄ κΈ°λ¥μ μ•½ 85%κ°€ κµ¬ν„**λμ–΄ μμΌλ©°, API μ„¤κ³„μ™€ ν•µμ‹¬ λ΅μ§μ€ μ™„μ„±λ μƒνƒμ…λ‹λ‹¤. νΉν **ν΄λΌμ΄μ–ΈνΈ SDK, ν…μ¤νΈ μΈν”„λΌ, μλ§‰ μƒμ„±** λ“± λ³µμ΅ν• κΈ°λ¥λ“¤μ΄ μ΄λ―Έ κµ¬ν„λμ–΄ μμ–΄ ν’μ§μ΄ λ†’μµλ‹λ‹¤.

**μ£Όμ” μ™„μ„± μμ—­:**
- REST API μ—”λ“ν¬μΈνΈ (100%)
- λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ (100%) 
- ν΄λΌμ΄μ–ΈνΈ SDK (100%)
- ν…μ¤νΈ μ½”λ“ (100%)

**μ£Όμ” λ―Έμ™„μ„± μμ—­:**
- ν”„λ΅λ•μ… λ°°ν¬ μΈν”„λΌ (30%)
- μ‹¤μ  TTS μ—”μ§„ μ—°λ™ (0%)
- μ„±λ¥ μµμ ν™” (0%)
- λ¨λ‹ν„°λ§ μ‹μ¤ν… (10%)

ν„μ¬ μƒνƒμ—μ„ **MVP(Minimum Viable Product) μ¶μ‹κ°€ κ°€λ¥**ν•λ©°, Celery/Redis μ—°λ™κ³Ό fish-speech μ—”μ§„ ν†µν•©λ§ μ™„λ£ν•λ©΄ κΈ°λ³Έμ μΈ μ„λΉ„μ¤ μ κ³µμ΄ κ°€λ¥ν•  κ²ƒμΌλ΅ νλ‹¨λ©λ‹λ‹¤.
